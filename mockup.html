<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>T-Shirt Mockup Maker</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f3f3f3;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    padding: 20px;
  }

  h1 {
    margin-bottom: 20px;
    color: #222;
  }

  .mockup-area {
    position: relative;
    width: 300px;
    height: 380px;
    background-color: #ffffff;
    border: 2px solid #ddd;
    border-radius: 10px;
    overflow: hidden;
    cursor: grab;
    background-image: url('tshirt.png'); /* transparent t-shirt */
    background-size: cover;
    background-position: center;
  }

  #uploadedImage {
    position: absolute;
    top: 150px;
    left: 80px;
    width: 140px;
    cursor: move;
    user-select: none;
  }

  .controls {
    margin-top: 20px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
  }

  input[type="file"], input[type="color"], button {
    padding: 10px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background: #fff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.15);
  }

  button:hover {
    background: #222;
    color: #fff;
  }
</style>
</head>
<body>
  <h1>ðŸ‘• T-Shirt Mockup Maker</h1>

  <div id="mockup" class="mockup-area">
    <img id="uploadedImage" src="" alt="">
  </div>

  <div class="controls">
    <input type="file" id="imageUpload" accept="image/*">
    <input type="color" id="colorPicker" value="#ffffff">
    <button id="downloadBtn">Download Mockup</button>
  </div>

<script>
const imageUpload = document.getElementById("imageUpload");
const uploadedImage = document.getElementById("uploadedImage");
const mockup = document.getElementById("mockup");
const colorPicker = document.getElementById("colorPicker");
const downloadBtn = document.getElementById("downloadBtn");

// Upload logo
imageUpload.addEventListener("change", (e) => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = (event) => {
    uploadedImage.src = event.target.result;
    uploadedImage.style.display = "block";
  };
  reader.readAsDataURL(file);
});

// Drag logo
let isDragging = false, offsetX, offsetY;
uploadedImage.addEventListener("mousedown", (e) => {
  isDragging = true;
  offsetX = e.offsetX;
  offsetY = e.offsetY;
});
window.addEventListener("mouseup", () => isDragging = false);
window.addEventListener("mousemove", (e) => {
  if (!isDragging) return;
  const rect = mockup.getBoundingClientRect();
  let x = e.clientX - rect.left - offsetX;
  let y = e.clientY - rect.top - offsetY;
  uploadedImage.style.left = x + "px";
  uploadedImage.style.top = y + "px";
});

// Change shirt color
colorPicker.addEventListener("input", (e) => {
  mockup.style.backgroundColor = e.target.value;
});

// Download as image
downloadBtn.addEventListener("click", () => {
  const canvas = document.createElement("canvas");
  canvas.width = mockup.offsetWidth;
  canvas.height = mockup.offsetHeight;
  const ctx = canvas.getContext("2d");

  // Draw color background
  ctx.fillStyle = colorPicker.value;
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Draw t-shirt image
  const tshirt = new Image();
  tshirt.crossOrigin = "anonymous";
  tshirt.src = getComputedStyle(mockup).backgroundImage.slice(5, -2);
  tshirt.onload = () => {
    ctx.drawImage(tshirt, 0, 0, canvas.width, canvas.height);
    if (uploadedImage.src) {
      const img = new Image();
      img.src = uploadedImage.src;
      img.onload = () => {
        const rect = uploadedImage.getBoundingClientRect();
        const parent = mockup.getBoundingClientRect();
        const x = rect.left - parent.left;
        const y = rect.top - parent.top;
        ctx.drawImage(img, x, y, uploadedImage.width, uploadedImage.height);
        const link = document.createElement("a");
        link.download = "tshirt_mockup.png";
        link.href = canvas.toDataURL();
        link.click();
      };
    }
  };
});
</script>
</body>
</html>
